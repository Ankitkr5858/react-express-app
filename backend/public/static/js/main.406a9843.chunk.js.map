{"version":3,"sources":["constants/authentication.constants.js","constants/user.constants.js","services/api.js","services/user.service.js","constants/error.constants.js","actions/error.actions.js","history.js","actions/user.actions.js","components/login/LoginEmail.js","components/login/LoginOTP.js","components/profile/ShowProfile.js","components/profile/UpdateProfile.js","components/ProtectedRoute.js","components/invitation/Invitation.js","App.js","reducers/authentication.reducer.js","reducers/error.reducer.js","reducers/referral.reducer.js","reducers/index.js","store.js","index.js"],"names":["AuthenticationConstants","LOGIN_SUCCESS","LOGIN_FAILURE","OTP_SUCCESS","OTP_FAILURE","LOGOUT","UserConstants","PROFILE_UPDATE_SUCCESS","PROFILE_UPDATE_FAILURE","REFERRAL_CODE_PERSISTED","authorizationHeader","userData","JSON","parse","localStorage","getItem","accessToken","json","response","ok","then","Promise","reject","bind","path","headers","fetch","body","method","stringify","userService","login","email","api","post","user","setItem","loginWithOTP","otp","logout","removeItem","update","data","patch","ErrorConstants","displayError","error","type","deleteError","errorActions","history","createBrowserHistory","userActions","dispatch","push","logoutAndRedirect","isProfileComplete","updateProfile","persistReferralCode","code","invitedByReferralCode","LoginEmail","props","state","handleChange","handleSubmit","e","target","name","value","this","setState","preventDefault","className","onSubmit","htmlFor","required","onChange","React","Component","actionCreators","connect","errorReducer","LoginOTP","ShowProfile","onLogout","firstName","lastName","window","location","origin","referralCode","role","to","onClick","authenticationReducer","UpdateProfile","Object","assign","referralCodeReducer","component","rest","render","pathname","from","Invitation","match","params","App","listen","action","initialState","rootReducer","combineReducers","createStore","applyMiddleware","thunkMiddleware","ReactDOM","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.406a9843.chunk.js","sourcesContent":["export const AuthenticationConstants = {\n    LOGIN_SUCCESS: 'LOGIN_SUCCESS',\n    LOGIN_FAILURE: 'LOGIN_FAILURE',\n\n    OTP_SUCCESS: 'OTP_SUCCESS',\n    OTP_FAILURE: 'OTP_FAILURE',\n\n    LOGOUT: 'USERS_LOGOUT'\n};\n\nexport default AuthenticationConstants;\n","export const UserConstants = {\n    PROFILE_UPDATE_SUCCESS: 'PROFILE_UPDATE_SUCCESS',\n    PROFILE_UPDATE_FAILURE: 'PROFILE_UPDATE_FAILURE',\n    REFERRAL_CODE_PERSISTED: 'REFERRAL_CODE_PERSISTED',\n};\n\nexport default UserConstants;\n","const authorizationHeader = () => {\n    const userData = JSON.parse(localStorage.getItem('user') || \"{}\");\n    if (userData.accessToken) {\n        return {'Authorization': `Bearer ${userData.accessToken}`}\n    } else {\n        return {}\n    }\n};\n\nconst json = (response) => {\n    if (response.ok) return response.json()\n    return response.json().then(Promise.reject.bind(Promise))\n};\n\nclass API {\n    get(path, headers = {}) {\n        return fetch(`/api/${path}`, {\n            headers: {...authorizationHeader(), ...headers}\n        }).then(json)\n    }\n\n    post(path, body, headers = {}) {\n        return fetch(`/api/${path}`, {\n            method: 'POST',\n            headers: {...authorizationHeader(), 'Content-Type': 'application/json', ...headers},\n            body: JSON.stringify(body)\n        }).then(json)\n    }\n\n    patch(path, body, headers = {}) {\n        return fetch(`/api/${path}`, {\n            method: 'PATCH',\n            headers: {...authorizationHeader(), 'Content-Type': 'application/json', ...headers},\n            body: JSON.stringify(body)\n        }).then(json)\n    }\n}\n\nexport default new API();\n","import api from './api';\n\nfunction userData() {\n    return JSON.parse(localStorage.getItem('user'));\n}\n\nfunction login(email) {\n    return api.post('login', {email}).then(user => {\n        localStorage.setItem('user', JSON.stringify(user));\n        return user;\n    });\n}\n\nfunction loginWithOTP(email, otp) {\n    return api.post('otp', {email, otp}).then(user => {\n        user = {...userData(), ...user};\n        localStorage.setItem('user', JSON.stringify(user));\n        return user;\n    });\n}\n\nfunction update(data) {\n    return api.patch('user/profile', data).then(user => {\n        user = {...userData(), ...user};\n        localStorage.setItem('user', JSON.stringify(user));\n        return user;\n    });\n}\n\nfunction logout() {\n    localStorage.removeItem('user');\n}\n\nexport const userService = {\n    login,\n    loginWithOTP,\n    logout,\n    update,\n    userData\n};\n","export const ErrorConstants = {\n    DISPLAY_ERROR: \"DISPLAY_ERROR\",\n    DELETE_ERROR: \"DELETE_ERROR\"\n};\n","import {ErrorConstants} from '../constants/error.constants';\n\nexport function displayError(error) {\n    return {\n        type: ErrorConstants.DISPLAY_ERROR,\n        error: error\n    }\n}\n\nexport function deleteError() {\n    return {type: ErrorConstants.DELETE_ERROR}\n}\n\nexport const errorActions = {\n    displayError,\n    deleteError\n};\n","import {createBrowserHistory} from 'history';\n\nexport const history = createBrowserHistory();\n","import {AuthenticationConstants} from '../constants/authentication.constants';\nimport {UserConstants} from '../constants/user.constants';\nimport {userService} from '../services/user.service';\nimport {deleteError, displayError} from './error.actions';\nimport {history} from '../history';\n\nfunction login(email) {\n    return dispatch => {\n        userService.login(email)\n            .then(\n                user => {\n                    dispatch({type: AuthenticationConstants.LOGIN_SUCCESS, user});\n                    deleteError();\n                    history.push('/otp');\n                },\n                error => {\n                    dispatch({type: AuthenticationConstants.LOGIN_FAILURE, error});\n                    dispatch(displayError(error.error || 'Something went wrong'));\n                }\n            );\n    };\n}\n\nfunction loginWithOTP(otp) {\n    return dispatch => {\n        const user = userService.userData();\n\n        userService.loginWithOTP(user.email, otp)\n            .then(\n                ({accessToken}) => {\n                    dispatch({type: AuthenticationConstants.OTP_SUCCESS, accessToken: accessToken});\n                    deleteError();\n                    if (user.isProfileComplete) {\n                        history.push('/profile');\n                    } else {\n                        history.push('/profile/edit');\n                    }\n                },\n                error => {\n                    dispatch({type: AuthenticationConstants.OTP_FAILURE, error});\n                    dispatch(displayError(error.error || 'Something went wrong'));\n                }\n            );\n    };\n}\n\nfunction updateProfile(user) {\n    return dispatch => {\n        userService.update(user)\n            .then(\n                user => {\n                    dispatch({type: UserConstants.PROFILE_UPDATE_SUCCESS, user});\n                    deleteError();\n                    history.push('/profile');\n                },\n                error => {\n                    dispatch({type: UserConstants.PROFILE_UPDATE_FAILURE, error});\n                    dispatch(displayError(error.error || 'Something went wrong'));\n                }\n            );\n    };\n}\n\n\nfunction logout() {\n    userService.logout();\n    return {type: AuthenticationConstants.LOGOUT};\n}\n\nfunction logoutAndRedirect() {\n    history.push('/login');\n    return {type: AuthenticationConstants.LOGOUT};\n}\n\nfunction persistReferralCode(code) {\n    return {type: UserConstants.REFERRAL_CODE_PERSISTED, invitedByReferralCode: code}\n}\n\nexport const userActions = {\n    login,\n    logout,\n    logoutAndRedirect,\n    loginWithOTP,\n    updateProfile,\n    persistReferralCode\n};\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {userActions} from '../../actions/user.actions'\n\nclass LoginEmail extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.props.logout();\n\n        this.state = {\n            email: ''\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange(e) {\n        const {name, value} = e.target;\n        this.setState({[name]: value});\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n\n        const {email} = this.state;\n        if (email) {\n            this.props.login(email);\n        }\n    }\n\n    render() {\n        const {email} = this.state;\n        const {error} = this.props;\n        return (\n            <div>\n                <h2>Login</h2>\n                {error && <div className=\"alert alert-danger\">{error}</div>}\n                <form name=\"form\" onSubmit={this.handleSubmit}>\n                    <div className='form-group'>\n                        <label htmlFor=\"email\">Email</label>\n                        <input type=\"text\" className=\"form-control\" required={true} name=\"email\" value={email}\n                               onChange={this.handleChange}/>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <button className=\"btn btn-primary\">Login</button>\n                    </div>\n                </form>\n            </div>\n        );\n    }\n}\n\nfunction mapState(state) {\n    const {error} = state.errorReducer;\n    return {error};\n}\n\nconst actionCreators = {\n    login: userActions.login,\n    logout: userActions.logout\n};\n\nexport default connect(mapState, actionCreators)(LoginEmail);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {userActions} from '../../actions/user.actions'\n\nclass LoginOTP extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            otp: ''\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange(e) {\n        const {name, value} = e.target;\n        this.setState({[name]: value});\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n\n        const {otp} = this.state;\n        if (otp) {\n            this.props.loginWithOTP(otp);\n        }\n    }\n\n    render() {\n        const {otp} = this.state;\n        const {error} = this.props;\n\n        return (\n            <div>\n                <h2>OTP</h2>\n                <p>We have sent you an email with One Time Password. Please, enter it below in order to login.</p>\n                {error && <div className=\"alert alert-danger\">{error}</div>}\n                <form name=\"form\" onSubmit={this.handleSubmit}>\n                    <div className='form-group'>\n                        <label htmlFor=\"otp\">One Time Password</label>\n                        <input type=\"text\" className=\"form-control\" required={true} name=\"otp\" value={otp}\n                               onChange={this.handleChange}/>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <button className=\"btn btn-primary\">Login</button>\n                    </div>\n                </form>\n            </div>\n        );\n    }\n}\n\nfunction mapState(state) {\n    const {error} = state.errorReducer;\n    return {error};\n}\n\nconst actionCreators = {\n    loginWithOTP: userActions.loginWithOTP,\n    logout: userActions.logout\n};\n\nexport default connect(mapState, actionCreators)(LoginOTP);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {Link} from \"react-router-dom\";\nimport {userActions} from \"../../actions/user.actions\";\n\nclass ShowProfile extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onLogout = this.onLogout.bind(this);\n    }\n\n    onLogout(e) {\n        e.preventDefault();\n        this.props.logoutAndRedirect();\n    }\n\n    render() {\n        const {user} = this.props;\n        return (\n            <div>\n                <h2>User profile</h2>\n                <dl>\n                    <dt>Email</dt>\n                    <dd>{user.email}</dd>\n\n                    <dt>First name</dt>\n                    <dd>{user.firstName}</dd>\n\n                    <dt>Last name</dt>\n                    <dd>{user.lastName}</dd>\n\n                    <dt>You can invite your friends by the following link:</dt>\n                    <dd>{`${window.location.origin}/invite/${this.props.user.referralCode}`}</dd>\n\n                    <div className=\"btn-group\" role=\"group\">\n                        <Link className=\"btn btn-primary\" to=\"/profile/edit\">Edit Profile </Link>\n                        <button className=\"btn btn-secondary\" onClick={this.onLogout}>Logout</button>\n                    </div>\n                </dl>\n            </div>\n        );\n    }\n}\n\nfunction mapState(state) {\n    const {user} = state.authenticationReducer;\n    return {user};\n}\n\nconst actionCreators = {\n    logoutAndRedirect: userActions.logoutAndRedirect\n};\n\nexport default connect(mapState, actionCreators)(ShowProfile);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {userActions} from '../../actions/user.actions'\n\nclass UpdateProfile extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const {invitedByReferralCode} = props;\n        const user = Object.assign({}, this.props.user);\n\n        if (invitedByReferralCode) {\n            user.invitedByReferralCode = invitedByReferralCode;\n        }\n\n        this.state = {user};\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange(e) {\n        const {name, value} = e.target;\n        this.setState({user: {...this.state.user, [name]: value}});\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        this.props.updateProfile(this.state.user);\n    }\n\n    render() {\n        const {user} = this.state;\n        const {error} = this.props;\n\n        return (\n            <div>\n                <h2>Update Profile</h2>\n                {error && <div className=\"alert alert-danger\">{error}</div>}\n                <form name=\"form\" onSubmit={this.handleSubmit}>\n                    <div className='form-group'>\n                        <label htmlFor=\"firstName\">First name</label>\n                        <input type=\"text\" className=\"form-control\" required={true} name=\"firstName\"\n                               value={user.firstName || ''} onChange={this.handleChange}/>\n                    </div>\n\n                    <div className='form-group'>\n                        <label htmlFor=\"lastName\">Last name</label>\n                        <input type=\"text\" className=\"form-control\" required={true} name=\"lastName\"\n                               value={user.lastName || ''} onChange={this.handleChange}/>\n                    </div>\n\n                    <div className='form-group'>\n                        <label htmlFor=\"invitedByReferralCode\">Referral code</label>\n                        <input type=\"text\" className=\"form-control\" name=\"invitedByReferralCode\"\n                               value={user.invitedByReferralCode || ''} onChange={this.handleChange}/>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <button className=\"btn btn-primary\">Save</button>\n                    </div>\n                </form>\n            </div>\n        );\n    }\n}\n\nfunction mapState(state) {\n    const {user} = state.authenticationReducer;\n    const {error} = state.errorReducer;\n    const {invitedByReferralCode} = state.referralCodeReducer;\n    return {user, error, invitedByReferralCode};\n}\n\nconst actionCreators = {\n    updateProfile: userActions.updateProfile\n};\n\nexport default connect(mapState, actionCreators)(UpdateProfile);\n","import React from 'react';\nimport {Redirect, Route} from 'react-router-dom';\nimport {connect} from \"react-redux\";\n\nexport const ProtectedRoute = ({component: Component, user, ...rest}) => {\n    return (<Route {...rest} render={props => (\n        user && user.accessToken\n            ? <Component {...props} />\n            : <Redirect to={{pathname: '/login', state: {from: props.location}}}/>\n    )}/>)\n};\n\nfunction mapState(state) {\n    const {user} = state.authenticationReducer;\n    return {user};\n}\n\nexport default connect(mapState, {})(ProtectedRoute);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {userActions} from '../../actions/user.actions'\nimport LoginEmail from '../login/LoginEmail';\n\nclass Invitation extends React.Component {\n    constructor(props) {\n        super(props);\n        const { referralCode } = this.props.match.params;\n        this.props.persistReferralCode(referralCode);\n    }\n\n    render() {\n        return <LoginEmail />\n    }\n}\n\nfunction mapState(state) {\n    return {};\n}\n\nconst actionCreators = {\n    persistReferralCode: userActions.persistReferralCode\n};\n\nexport default connect(mapState, actionCreators)(Invitation);\n","import React from 'react';\r\nimport {Redirect, Route, Router, Switch} from 'react-router-dom';\r\nimport LoginEmail from \"./components/login/LoginEmail\";\r\nimport LoginOTP from \"./components/login/LoginOTP\";\r\nimport ShowProfile from \"./components/profile/ShowProfile\";\r\nimport UpdateProfile from \"./components/profile/UpdateProfile\";\r\nimport ProtectedRoute from \"./components/ProtectedRoute\";\r\nimport {history} from './history';\r\nimport {errorActions} from \"./actions/error.actions\";\r\nimport {connect} from \"react-redux\";\r\nimport \"./App.css\"\r\nimport Invitation from \"./components/invitation/Invitation\";\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        history.listen((location, action) => {\r\n            // clear errors on location change\r\n            this.props.deleteError();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"jumbotron\">\r\n                <div className=\"container text-center\">\r\n                    <div className=\"jumbotron-card text-center\">\r\n                        <Router history={history}>\r\n                            <Switch>\r\n                                <Route path=\"/login\" component={LoginEmail}/>\r\n                                <Route path=\"/otp\" component={LoginOTP}/>\r\n                                <Route path=\"/profile/edit\" component={UpdateProfile}/>\r\n                                <ProtectedRoute path=\"/profile\" component={ShowProfile}/>\r\n                                <Route path='/invite/:referralCode' component={Invitation} />\r\n                                <Redirect from=\"*\" to=\"/login\"/>\r\n                            </Switch>\r\n                        </Router>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapState(state) {\r\n    return {};\r\n}\r\n\r\n\r\nconst actionCreators = {\r\n    deleteError: errorActions.deleteError\r\n};\r\n\r\nexport default connect(mapState, actionCreators)(App);\r\n","import {AuthenticationConstants} from '../constants/authentication.constants';\nimport {UserConstants} from '../constants/user.constants';\n\nconst user = JSON.parse(localStorage.getItem('user'));\nconst initialState = user ? {user} : {};\n\nexport function authenticationReducer(state = initialState, action) {\n    const {type, user, accessToken, invitedByReferralCode} = action;\n\n    switch (type) {\n        case AuthenticationConstants.LOGIN_SUCCESS:\n            return {user};\n        case AuthenticationConstants.OTP_SUCCESS:\n            return {user: {...state.user, accessToken}};\n        case AuthenticationConstants.LOGOUT:\n            return {};\n        case UserConstants.REFERRAL_CODE_PERSISTED:\n            return {...state, invitedByReferralCode};\n        case UserConstants.PROFILE_UPDATE_SUCCESS:\n            return {user: {...state.user, ...user}};\n        default:\n            return state\n    }\n}\n\nexport default authenticationReducer;\n","import {ErrorConstants} from '../constants/error.constants';\n\nconst initialState = {\n    error: null\n};\n\nexport function errorReducer(state = initialState, action) {\n    const {error, type} = action;\n\n    if (type === ErrorConstants.DISPLAY_ERROR) {\n        return {error};\n    } else if (type === ErrorConstants.DELETE_ERROR){\n        return {};\n    }\n\n    return state;\n}\n","import {UserConstants} from '../constants/user.constants';\n\n\nexport function referralCodeReducer(state = {}, action) {\n    const {invitedByReferralCode} = action;\n\n    switch (action.type) {\n        case UserConstants.REFERRAL_CODE_PERSISTED:\n            return {invitedByReferralCode};\n        case UserConstants.PROFILE_UPDATE_SUCCESS:\n            return {};\n        default:\n            return state\n    }\n}\n\nexport default referralCodeReducer;\n","import {combineReducers} from 'redux';\n\nimport {authenticationReducer} from './authentication.reducer';\nimport {errorReducer} from './error.reducer';\nimport {referralCodeReducer} from \"./referral.reducer\";\n\nconst rootReducer = combineReducers({\n    authenticationReducer,\n    errorReducer,\n    referralCodeReducer\n});\n\nexport default rootReducer;\n","import { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport rootReducer from './reducers';\n\n\nexport default createStore(\n    rootReducer,\n    applyMiddleware(\n        thunkMiddleware\n    )\n);\n","import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport store from './store';\r\nimport {Provider} from 'react-redux';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Provider store={store}>\r\n            <App/>\r\n        </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}